<head>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <!-- Latest compiled and minified CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Latest compiled JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body id="ocd">
        <style>
            .container {
                background-color: #ffffff;
            }
            .container .main {
                background-color: linear-gradient(45deg, rgba(44, 58, 135, 1),rgba(0, 97, 199, 1));
                min-height: 100%;
            }
            body {
                background: linear-gradient(90deg,#2c3a87,#0061c7);
            }
            .accord-head-table td {
                background: linear-gradient(180deg,#1a76d7,#1a76d7);
            }
            tr td {
                color: #ffffff;
            }
            .child-table- th {
                font-weight: 400;
                background-color: #fafafa;
                color: #717171;
            }
            .child-table td {
                color: #010101;
            }
            .overlay {
                background-color: #00000047;
                height: 100%;
                width: 100%;
                position: fixed;
                top: 0;
                left: 0;
            }
            .overlay .container {
                margin-top: 100%;
                max-width: 100%;
            }
            a.navbar-brand {
                color: #0072aa;
                background: linear-gradient(90deg,#bff3ac,#48e645);
                text-align: left;
                margin-bottom: 5px;
                font-size: 35px;
                padding: 5px;
            }
            .accord-content {
                /* display: none; */
            }
            .accord-parent p {
                background-color: linear-gradient(90deg #2c3a87,#0061c7);
                border-radius:3px;
                color: #dff3c0;
            }
            .low_conf {
                background-color: #fffa7b !important;
            }
            .down_conf {
                background-color: #ff7d4b !important;
            }
            .logo-text {
                margin-left: -100px;
            }
            table.table.table-hover.accord-head-table {
                margin-bottom: 2px;
                border: 5px;
            }
        </style>
        <div class="container">
            <div class="row">
                <a href="https://www.sc.com/en/" class="site-branding__link navbar-brand" rel="home" itemprop="url">
                    <svg style="height: 60px;" class="site-branding__logo--full" viewBox="0 0 157 62" role="img" aria-describedby="sc-logo" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" class="icon-part-green" d="M28.9647 13.5687C29.8849 12.9703 30.8283 12.553 32.1542 12.5527C35.1952 12.5521 37.6604 15.0148 37.6604 18.052C37.6604 21.0891 35.1952 23.5511 32.1542 23.5511C30.8691 23.5511 29.894 23.1327 28.9647 22.5351L22.0721 18.052L28.9647 13.5687ZM4.21638 43.8988L30.0411 60.6903C32.5584 62.3193 36.0669 61.7306 37.7741 59.0631C39.4362 56.4661 38.7301 53.0234 36.1448 51.34L2.62803 29.5401C2.62803 29.5401 -0.805552 33.7103 0.23567 38.5748C0.977282 42.0396 4.21638 43.8988 4.21638 43.8988Z" fill="#38D200"></path>
                        <path fill-rule="evenodd" clip-rule="evenodd" class="icon-part-blue" d="M1.62342 18.0384C1.62342 23.556 5.57937 25.9416 5.57937 25.9416L36.1454 45.8223C36.1454 45.8223 39.5348 41.7708 38.5313 36.8528C37.8121 33.328 34.1628 31.2393 34.1628 31.2393L13.888 18.0521L25.7872 10.3133C28.3749 8.63344 29.109 5.17668 27.4269 2.59245C25.7449 0.00822502 22.2839 -0.725041 19.6961 0.954835L5.57779 10.184C5.57779 10.184 1.62342 12.5393 1.62342 18.0384ZM8.69567 60.5642C7.77544 61.1626 6.8321 61.5799 5.50624 61.5802C2.46521 61.5809 0 59.1182 0 56.081C0 53.0439 2.46521 50.5818 5.50624 50.5818C6.79141 50.5818 7.76651 51.0003 8.69567 51.5978L15.5883 56.0809L8.69567 60.5642Z" fill="#0473EA"></path>
                        <path fill-rule="evenodd" clip-rule="evenodd" class="logo-lettering" d="M154.98 29.7863L157.006 31.0221V45.8017H154.98V43.7137C153.992 45.1694 152.411 46.0576 150.509 46.0576C146.951 46.0576 144.407 43.4176 144.407 39.8154C144.407 36.1391 146.951 33.4497 150.509 33.4497C152.411 33.4497 153.992 34.3628 154.98 35.8431V29.7863ZM103.356 29.7807L105.357 31.0159V41.7592C105.357 43.4615 106.394 44.1277 107.704 44.1277C108.692 44.1277 109.68 43.8563 110.545 43.2395V45.1887C109.705 45.8055 108.544 46.0522 107.531 46.0522C104.937 46.0522 103.356 44.8925 103.356 41.6111V29.7807ZM116.633 33.4168C120.141 33.4168 122.439 36.0074 122.439 39.4863C122.439 39.8317 122.414 40.1771 122.365 40.4979H112.755C113.051 42.6938 114.78 44.1495 117.201 44.1495C118.758 44.1495 120.265 43.7054 121.549 42.7925V44.717C120.24 45.6053 118.758 46.0246 117.201 46.0246C113.372 46.0246 110.63 43.5573 110.63 39.8317C110.63 36.1801 112.952 33.4168 116.633 33.4168ZM137.236 33.4168C140.744 33.4168 143.042 36.0074 143.042 39.4863C143.042 39.8317 143.017 40.1771 142.968 40.4979H133.358C133.654 42.6938 135.384 44.1495 137.805 44.1495C139.361 44.1495 140.868 43.7054 142.153 42.7925V44.717C140.843 45.6053 139.361 46.0246 137.805 46.0246C133.975 46.0246 131.233 43.5573 131.233 39.8317C131.233 36.1801 133.555 33.4168 137.236 33.4168ZM85.8027 33.4167C87.705 33.4167 89.2612 34.305 90.2741 35.7607V33.6388H92.2998V45.8026H90.2741V43.73C89.2612 45.1611 87.705 46.0246 85.8027 46.0246C82.2451 46.0246 79.7007 43.3846 79.7007 39.7824C79.7007 36.1061 82.2451 33.4167 85.8027 33.4167ZM60.6783 33.4167C62.1359 33.4167 63.4946 33.8363 64.5817 34.6504V36.8956C63.6181 35.8594 62.2842 35.3166 60.8017 35.3166C58.2079 35.3166 56.3797 37.1177 56.3797 39.7084C56.3797 42.299 58.2327 44.1248 60.8267 44.1248C62.2842 44.1248 63.643 43.73 64.7052 42.8172V44.865C63.5193 45.6792 62.1112 46.0246 60.629 46.0246C56.8987 46.0246 54.3047 43.434 54.3047 39.7084C54.3047 36.0074 56.9726 33.4167 60.6783 33.4167ZM66.9284 29.783L68.9294 31.0183L68.9295 35.7113C69.8436 34.305 71.3011 33.4167 73.1538 33.4167C76.2172 33.4167 77.8478 35.662 77.8478 38.6474V45.8026H75.822V38.9928C75.822 36.6242 74.7845 35.366 72.6599 35.366C70.4117 35.366 68.9295 37.2904 68.9295 39.7084V45.8026H66.9284V29.783ZM101.86 33.4167V35.7113C99.4393 35.366 97.4135 36.9944 97.4135 40.0044V45.8026H95.4124V33.6388H97.4135V36.2295C98.3769 34.4283 99.9333 33.4167 101.86 33.4167ZM131.085 33.4167V35.7113C128.664 35.366 126.638 36.9944 126.638 40.0044V45.8026H124.637V33.6388H126.638V36.2295C127.602 34.4283 129.158 33.4167 131.085 33.4167ZM150.707 35.3496C148.236 35.3496 146.482 37.2247 146.482 39.7908C146.482 42.3073 148.236 44.1578 150.707 44.1578C153.202 44.1578 154.98 42.3073 154.98 39.7908C154.98 37.2247 153.202 35.3496 150.707 35.3496ZM86.0004 35.3166C83.5299 35.3166 81.7758 37.1917 81.7758 39.7577C81.7758 42.2743 83.5299 44.1248 86.0004 44.1248C88.4955 44.1248 90.2741 42.2743 90.2741 39.7577C90.2741 37.1917 88.4955 35.3166 86.0004 35.3166ZM116.658 35.2673C114.435 35.2673 113.101 36.8217 112.779 38.8695H120.314C120.117 36.7969 118.807 35.2673 116.658 35.2673ZM137.261 35.2673C135.038 35.2673 133.704 36.8217 133.383 38.8695H140.918C140.72 36.7969 139.41 35.2673 137.261 35.2673ZM106.911 33.4655C107.425 33.1394 108.083 33.1451 108.591 33.4801L110.607 34.8197L108.617 36.0944C108.11 36.4192 107.46 36.4201 106.952 36.0966L106.909 36.0695C105.956 35.4621 105.957 34.0712 106.911 33.4655ZM78.6879 15.6293C80.5902 15.6293 82.1466 16.5175 83.1592 17.9733V15.8513H85.185V28.0151H83.1592V25.9426C82.1466 27.3737 80.5902 28.2372 78.6879 28.2372C75.1304 28.2372 72.5859 25.5971 72.5859 21.9949C72.5859 18.3187 75.1304 15.6293 78.6879 15.6293ZM66.7805 11.9542V23.9441C66.7805 25.6465 67.8181 26.3127 69.1274 26.3127C70.1157 26.3127 71.1037 26.0413 71.9684 25.4245V27.3737C71.1286 27.9905 69.9673 28.2372 68.9544 28.2372C66.3605 28.2372 64.7794 27.0775 64.7794 23.796V13.1907L66.7805 11.9542ZM150.726 11.9551V28.0151H148.7V25.8932C147.712 27.3489 146.131 28.2372 144.229 28.2372C140.671 28.2372 138.127 25.5971 138.127 21.9949C138.127 18.3187 140.671 15.6293 144.229 15.6293C146.131 15.6293 147.712 16.5423 148.7 18.0226V13.1901L150.726 11.9551ZM121.945 15.6293C123.847 15.6293 125.404 16.5175 126.416 17.9733V15.8513H128.442V28.0151H126.416V25.9426C125.404 27.3737 123.847 28.2372 121.945 28.2372C118.388 28.2372 115.843 25.5971 115.843 21.9949C115.843 18.3187 118.388 15.6293 121.945 15.6293ZM58.6774 15.6293C60.1101 15.6293 61.4441 16.0241 62.3829 16.7396V18.8368C61.2714 17.8499 59.9124 17.2825 58.702 17.2825C57.4173 17.2825 56.5032 17.8746 56.5032 18.8615C56.5032 19.6017 56.8491 20.0458 57.8127 20.4158L60.7032 21.5755C62.2594 22.2417 62.9759 23.1792 62.9759 24.4869C62.9759 26.8062 61.0983 28.2372 58.455 28.2372C56.8491 28.2372 55.3915 27.7931 54.3293 27.0035V24.8324C55.6139 26.0413 57.0468 26.5841 58.4798 26.5841C59.9124 26.5841 60.9502 25.9673 60.9502 24.857C60.9502 24.1908 60.6043 23.6727 59.6903 23.3026L56.7998 22.143C55.3176 21.5016 54.5024 20.6627 54.5024 19.0836C54.5024 16.9617 56.207 15.6293 58.6774 15.6293ZM113.669 11.9551V28.0151H111.643V25.8932C110.655 27.3489 109.074 28.2372 107.172 28.2372C103.614 28.2372 101.07 25.5971 101.07 21.9949C101.07 18.3187 103.614 15.6293 107.172 15.6293C109.074 15.6293 110.655 16.5423 111.643 18.0226V13.1901L113.669 11.9551ZM138.003 15.6293V17.9239C135.582 17.5785 133.556 19.2069 133.556 22.217V28.0151H131.555V15.8513H133.556V18.442C134.519 16.6409 136.076 15.6293 138.003 15.6293ZM94.523 15.6293C97.5863 15.6293 99.217 17.8745 99.217 20.86V28.0151H97.1912V21.2054C97.1912 18.8368 96.1537 17.5785 94.029 17.5785C91.7809 17.5785 90.2987 19.503 90.2987 21.9209V28.0151H88.2976V15.8513H90.2987V17.9239C91.2128 16.5175 92.6703 15.6293 94.523 15.6293ZM78.8856 17.5291C76.4151 17.5291 74.661 19.4043 74.661 21.9703C74.661 24.4869 76.4151 26.3373 78.8856 26.3373C81.3807 26.3373 83.1592 24.4869 83.1592 21.9703C83.1592 19.4043 81.3807 17.5291 78.8856 17.5291ZM107.37 17.5291C104.899 17.5291 103.145 19.4043 103.145 21.9703C103.145 24.4869 104.899 26.3373 107.37 26.3373C109.865 26.3373 111.643 24.4869 111.643 21.9703C111.643 19.4043 109.865 17.5291 107.37 17.5291ZM144.427 17.5291C141.956 17.5291 140.202 19.4043 140.202 21.9703C140.202 24.4869 141.956 26.3373 144.427 26.3373C146.922 26.3373 148.7 24.4869 148.7 21.9703C148.7 19.4043 146.922 17.5291 144.427 17.5291ZM122.143 17.5291C119.672 17.5291 117.918 19.4043 117.918 21.9703C117.918 24.4869 119.672 26.3373 122.143 26.3373C124.638 26.3373 126.416 24.4869 126.416 21.9703C126.416 19.4043 124.638 17.5291 122.143 17.5291ZM69.5698 15.8293C70.0761 15.5033 70.7261 15.5009 71.2349 15.8232L71.2775 15.8502C72.2325 16.4553 72.2346 17.8462 71.2814 18.4541C70.7683 18.7815 70.1105 18.7773 69.6015 18.4435L67.5827 17.1087L69.5698 15.8293Z"></path>
                    </svg><span class="logo-text">Online Cheque Deposit - Teller Dashboard</span>
                </a>
            </div>
        </div>
        <div class="container main">
            {% if message %}
            <div class="alert alert-success">
                {{message}}
            </div>
            {% endif %}
            {% if error %}
            <div class="alert alert-danger">
                {{error}}
            </div>
            {% endif %}
                <div class"accordion" id="accordionPanelsStayOpenExample">
                <div class="accord1 accordion-item">
                    {% for record in records %}
                    <div class="accord-parent">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{record.trasaction_id}}" aria-expanded="true" aria-controls="collapse{{record.trasaction_id}}">
                            <table class="table table-hover accord-head-table">
                                <tr class="{{record.trasaction_id}}">
                                    <td>Status - {{record.status}}</td>
                                    <td>Account - {{record.payer_acc}}</td>
                                    <td>Overall confidence - {{record.conf}}</td>
                                    <td style="width: 188px;">
                                    </td>
                                </tr>
                            </table>
                        </button>
                    </h2>

                        <div class="accord-content {% if record.status != 'pending' %} collapse {% endif %}" id="collapse{{record.trasaction_id}}" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                            <div class="report" id="report_{{record.trasaction_id}}">
                                <table class="table table-hover child-table accordion-body">
                                    <tr class="{{record.13}}">
                                        <tr>
                                            <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8">Details</th>
                                        </tr>
                                        <th>#</th><td>{{record.trasaction_id}}</td>                                        
                                        <th>Status</th><td>{{record.status}}</td>                                        
                                        <th>Pay to</th>
                                        <td class="{% if record.pay_conf < 90 %} low_conf {% endif %} {% if record.pay_conf < 85 %} down_conf {% endif %}">
                                            {{record.pay_to}}
                                        </td>                                        
                                        <th>Payer account</th>
                                        <td class="{% if record.payer_acc < 90 %} low_conf {% endif %} {% if record.payer_acc < 85 %} down_conf {% endif %}">
                                            {{record.payer_acc}}
                                        </td>                                      
                                    </tr>
                                    <tr class="{{record.13}}">
                                        <th>Amount</th>
                                        <td class="{% if record.amt_conf < 90 %} low_conf {% endif %} {% if record.amt_conf < 85 %} down_conf {% endif %}">
                                            {{record.amt}}
                                        </td>                                      
                                        <th>IFSC code</th>
                                        <td class="{% if record.ifsc_conf < 90 %} low_conf {% endif %} {% if record.ifsc_conf < 85 %} down_conf {% endif %}">
                                            {{record.ifsc}}
                                        </td>                                      
                                        <th>Issued On</th><td>{{record.date_issued}}</td>                                        
                                        <th>Deposited On</th><td>{{record.created_date_time}}</td>                                        
                                    </tr>
                                    </table>
                                    <table class="table table-hover child-table accordion-body">
                                        <tr>
                                            <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8">Inputs</th>
                                        </tr>
                                        <tr class="{{record.13}}">
                                        <th>Payee Account</th>
                                        <td class="">
                                            {{record.payee_account}}
                                        </td>                                      
                                        <th>Payee Name</th>
                                        <td class="">
                                            {{record.payee_input_name}}
                                        </td>                                      
                                        <th>Contact</th>
                                        <td class="">
                                            {{record.contact_number}}
                                        </td>                                      
                                        <th>Reference</th>
                                        <td class="">
                                            {{record.reference_id}}
                                        </td>                                      
                                    </tr>
                                </table>
                                <table class="table table-hover child-table">
                                    <tr>
                                        <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8"
                                            class="{% if record.13 < 90 %} low_conf {% endif %} {% if record.13 < 85 %} down_conf {% endif %} text center">
                                            MICR - {{record.micr}}
                                        </th>
                                    </tr>
                                    <tr class="{{record.13}}">
                                        <th>MICR Status</th><td>{{record.micr_status}}</td>
                                        <th>MICR Pincode</th><td>{{record.micr_pin}}</td>
                                        <th>MICR Bank Code</th><td>{{record.micr_bank}}</td>
                                        <th>MICR Branch Code</th><td>{{record.micr_branch}}</td>
                                    </tr>
                                </table>
                                <table class="table table-hover child-table">
                                    <tr>
                                        <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8"
                                            class="text center">
                                            Signature
                                        </th>
                                    </tr>
                                    <tr class="{{record.13}}">
                                        <th>Signature present on check</th><td>{{record.signature_check}}</td>
                                        <th>Total signature(s) count</th><td>{{record.signature_count}}</td>
                                    </tr>
                                </table>
                                <div style="text-align: center;">
                                    {% if record.status == 'pending' %}
                                    <button class="btn btn-primary toggle-edit" data-toggle-id="{{record.trasaction_id}}">Update details</button>
                                    <a type="button" class="btn btn-success" href="/teller/action/{{record.trasaction_id}}/approved">Approve</a>
                                    <a type="button" class="btn btn-warning" href="/teller/action/{{record.trasaction_id}}/rejected">Reject</a>
                                    <a type="button" target="_blank" class="btn btn-secondary" href="/diagram/show/{{record.trasaction_id}}">Track the status</a>
                                    {% endif %}
                                <br><br>
                                </div>
                            </div>
                            <div class="form" style="display: none;" id="form_{{record.trasaction_id}}">
                                <form method="post" action="/update/{{record.trasaction_id}}">{% csrf_token %}
                                    <table class="table table-hover child-table accordion-body">
                                        <tr class="{{record.13}}">
                                            <tr>
                                                <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8">Details</th>
                                            </tr>
                                            <th>#</th><td>{{record.trasaction_id}}</td>                                        
                                            <th>Status</th><td>{{record.status}}</td>                                        
                                            <th>Pay to</th>
                                            <td class="{% if record.pay_conf < 90 %} low_conf {% endif %} {% if record.pay_conf < 85 %} down_conf {% endif %}">
                                                <input type="text" value="{{record.pay_to}}" id="pay_to" name="pay_to" required/>
                                            </td>                                        
                                            <th>Payer account</th>
                                            <td class="{% if record.payer_acc_conf < 90 %} low_conf {% endif %} {% if record.payer_acc_conf < 85 %} down_conf {% endif %}">
                                                <input type="text" value="{{record.payer_acc}}" id="payer_acc" name="payer_acc" required/>
                                            </td>                                      
                                        </tr>
                                        <tr class="{{record.13}}">
                                            <th>Amount</th>
                                            <td class="{% if record.amt_conf < 90 %} low_conf {% endif %} {% if record.amt_conf < 85 %} down_conf {% endif %}">
                                                <input type="text" value="{{record.amt}}" id="amt" name="amt" required/>
                                            </td>                                      
                                            <th>IFSC code</th>
                                            <td class="{% if record.ifsc_conf < 90 %} low_conf {% endif %} {% if record.ifsc_conf < 85 %} down_conf {% endif %}">
                                                <input type="text" value="{{record.ifsc}}" id="ifsc" name="ifsc" required/>
                                            </td>                                      
                                            <th>Issued On</th><td><input type="text" value="{{record.date_issued}}" id="issued_on" name="issued_on" required/></td>                                        
                                            <th>Deposited On</th><td>{{record.created_date_time}}</td>                                        
                                        </tr>
                                    </table>
                                    <table class="table table-hover child-table">
                                        <tr>
                                            <th style="background-color: #e9e9e9 !important; text-align: center;" colspan="8"
                                                class="{% if record.micr_conf < 90 %} low_conf {% endif %} {% if record.micr_conf < 85 %} down_conf {% endif %} text center">
                                                MICR - <input type="text" value="{{record.micr}}" id="micr" name="micr" required/>
                                            </th>
                                        </tr>
                                        <tr class="{{record.13}}">
                                            <th>MICR Status</th><td><input type="text" value="{{record.micr_status}}" id="micr_status" name="micr_status" required/></td>
                                            <th>MICR Pincod</th><td><input type="text" value="{{record.micr_pin}}" id="micr_pin" name="micr_pin" required/></td>
                                            <th>MICR Bank Code</th><td><input type="text" value="{{record.micr_bank}}" id="micr_bank" name="micr_bank" required/></td>
                                            <th>MICR Branch Code</th><td><input type="text" value="{{record.micr_branch}}" id="micr_branch" name="micr_branch" required/></td>
                                        </tr>
                                    </table>
                                    <div style="text-align: center;">
                                        <button type="submit" class="btn btn-warning">Submit details</button>
                                        <a class="btn btn-secondary toggle-edit" data-toggle-id="{{record.trasaction_id}}">Cancel Editing</a>
                                        <br><br>
                                    </div>
                                    </form>
                            </div>
                            <table class="table table-hover child-table">
                                <tr>
                                    <th style="background-color: #e9e9e9 !important; text-align: center;">Reference</th>
                                </tr>
                                <tr>
                                    <td class="text-center">
                                        <img src="/static/images/{{record.cheque}}" style="max-width:100%"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="overlay" id="overlay" style="display: none;">
            <div class="container">
                <div class="row">
                    <img src="" id="overlay_image">
                </div>
            </div>
        </div>
        <script type="application/JavaScript">
            $(document).ready(function(){
                $('.overlay').click(function() {
                    $('.overlay').hide();
                });
                $('.show_image').click(function(){
                    $('#overlay_image').attr('src','/images/'+$(this).attr('data-src'));
                    $('#overlay').show();
                });
                $('.accord1 .accord-parent p').click(function(){
                    // $(this).next('.accord-content').shideToggle();
                    // $(this).closest('accord-parent').simblings().find('.accord-content').shideUp();
                });
                $('.toggle-edit').click(function(){
                    let id = $(this).attr('data-toggle-id');
                    $('#report_'+id+',#form_'+id).toggle();
                });
            });
        </script>
    </body>
</head>